@model AgriculturaWeb.Models.Siembra
@{
    ViewBag.Title = "Registrar Siembra";
}

<div class="container mt-4 mb-5">
    <div class="card shadow-lg border-0">
        <div class="card-header bg-success text-white d-flex justify-content-between align-items-center">
            <h5 class="mb-0">
                <i class="fa-solid fa-seedling me-2"></i>Registrar nueva Siembra
            </h5>
            <a href="@Url.Action("Index", "Siembras")" class="btn btn-light btn-sm">
                <i class="fa-solid fa-arrow-left"></i> Regresar al listado
            </a>
        </div>

        <div class="card-body p-4">
            @using (Html.BeginForm())
            {
                @Html.AntiForgeryToken()

                <div class="row g-3">
                    <!-- Campo: Lote -->
                    <div class="col-md-4">
                        <label class="form-label fw-bold">Lote</label>
                        @Html.DropDownListFor(m => m.IdLote,
                            new SelectList(ViewBag.Lotes, "IdLote", "Nombre"),
                            "-- Seleccione un Lote --",
                            new { @class = "form-select", required = "required" })
                        @Html.ValidationMessageFor(m => m.IdLote, "", new { @class = "text-danger" })
                    </div>

                    <!-- Campo: Variedad -->
                    <div class="col-md-4">
                        <label class="form-label fw-bold">Variedad</label>
                        @Html.DropDownListFor(m => m.IdVariedad,
                            new SelectList(ViewBag.Variedades, "IdVariedad", "Nombre"),
                            "-- Seleccione una Variedad --",
                            new { @class = "form-select", required = "required" })
                        @Html.ValidationMessageFor(m => m.IdVariedad, "", new { @class = "text-danger" })
                    </div>

                    <!-- Campo: Temporada -->
                    <div class="col-md-4">
                        <label class="form-label fw-bold">Temporada</label>
                        @Html.DropDownListFor(m => m.IdTemporada,
                            new SelectList(ViewBag.Temporadas, "IdTemporada", "Nombre"),
                            "-- Seleccione una Temporada --",
                            new { @class = "form-select", required = "required" })
                        @Html.ValidationMessageFor(m => m.IdTemporada, "", new { @class = "text-danger" })
                    </div>

                    <!-- Campo: Fecha de Siembra -->
                    <div class="col-md-4">
                        <label class="form-label fw-bold">Fecha de Siembra</label>
                        @Html.TextBoxFor(m => m.FechaSiembra,
                            new { @class = "form-control", type = "date", required = "required" })
                        @Html.ValidationMessageFor(m => m.FechaSiembra, "", new { @class = "text-danger" })
                    </div>

                    <!-- Campo: Densidad de Plantas -->
                    <div class="col-md-4">
                        <label class="form-label fw-bold">Densidad de Plantas</label>
                        @Html.TextBoxFor(m => m.DensidadPlantas,
                            new { @class = "form-control", type = "number", placeholder = "Ej. 1200" })
                        @Html.ValidationMessageFor(m => m.DensidadPlantas, "", new { @class = "text-danger" })
                    </div>
                </div>

                <!-- Botones -->
                <div class="mt-4 text-center">
                    <button type="submit" class="btn btn-success px-4">
                        <i class="fa-solid fa-floppy-disk"></i> Guardar
                    </button>
                    <a href="@Url.Action("Index", "Home")" class="btn btn-secondary ms-2 px-4">
                        <i class="fa-solid fa-home"></i> Regresar al Panel
                    </a>
                </div>
            }
        </div>
    </div>
</div>

@section scripts {
    <script>
        // Opcional: mensaje visual si el usuario intenta enviar sin completar los campos
        document.querySelector("form").addEventListener("submit", function (e) {
            if (!this.checkValidity()) {
                e.preventDefault();
                alert("⚠️ Por favor, completa todos los campos requeridos antes de guardar.");
            }
        });
    </script>
}
